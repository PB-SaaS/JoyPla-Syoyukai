<?php
//<!-- SMP_DYNAMIC_PAGE DISPLAY_ERRORS=OFF NAME=form -->
?>
<!DOCTYPE html>
<html>
  <head>
 <?php include_once "NewJoyPla/src/Head.php"; ?>
    <title>JoyPla 院内商品情報変更 - 確認</title>
    <script>
     
     $(function(){
   getDistributor();
  })
  
  function getDistributor(){
   $.ajax({
             url:'%url/rel:mpgt:getDistributor%',
             type:'POST',
             data:{
             },
             dataType: 'json'
         })
         // Ajaxリクエストが成功した時発動
         .done( (data) => {
          console.log(data);
             if(! data.result){
        alert("取得に失敗しました");
           return false;
             }
             makeDistributor(data.data,'distributorId','$distributorId$');
         })
         // Ajaxリクエストが失敗した時発動
         .fail( (data) => {
          console.log(data);
       alert("取得に失敗しました");
       return false;
         })
         // Ajaxリクエストが成功・失敗どちらでも発動
         .always( (data) => {
          console.log(data);
         });
  }
  
  function makeDistributor(data,tag,selectedval){
          text = '';
         for(let i = 0 ; i < data.length ; i++){
          if(selectedval == data[i][1]){
           text = data[i][0];
          }
         }
         $('#'+tag).text(text);
  }
    </script>
    <style>
     .uk-navbar-container{
      border-bottom : solid 2px #98CB00;
     }
     .bk-application-color{
      background : #98CB00;
     }
#mainPage{
    display: none;
}

dl.cf{
  padding-bottom: 20px;
  border-bottom: 1px solid #e5e5e5 !important;
}

    </style>
  </head>
  <body>
 <?php include_once "NewJoyPla/src/Header.php"; ?>
   <div class="uk-section uk-section-default uk-preserve-color uk-padding-remove">
     <div class="uk-container uk-container-expand" uk-height-viewport="expand: true">
<div class="uk-width-2-3@m uk-margin-auto uk-margin-remove-top uk-margin-bottom" id="mainPage">

                <!-- SMP_TEMPLATE_HEADER start -->
 <h1>院内商品情報変更 - 確認</h1>

 <p class="header_text">変更内容をご確認の上、変更ボタンをクリックしてください。<br><p class="uk-alert-danger uk-alert">内容を修正する場合は、戻るボタンをクリックしてください。</p></p>
                <!-- SMP_TEMPLATE_HEADER end -->
               <!-- SMP_TEMPLATE_FORM start -->
 <form method="post" action="/regist/Reg2">
 <input type="hidden" name="confirm" value="true">
  <div class="smp_tmpl">
     <dl class="cf">
      <dt class="title">
       メーカー名
      </dt><dd class="data ">
       $makerName$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       商品名
      </dt><dd class="data ">
       $itemName$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       製品コード
      </dt><dd class="data ">
       $itemCode$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       規格
      </dt><dd class="data ">
       $itemStandard$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       JANコード
      </dt><dd class="data ">
       $itemJANCode$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       不使用フラグ
      </dt><dd class="data multi2">
       $notUsedFlag:v$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       卸業者ID
      </dt><dd class="data ">
       <span id="distributorId"></span> <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       カタログNo
      </dt><dd class="data ">
       $catalogNo$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       シリアルNo
      </dt><dd class="data ">
       $serialNo$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       入数
      </dt><dd class="data integer">
       $quantity$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       個数単位
      </dt><dd class="data ">
       $itemUnit$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       価格
      </dt><dd class="data real">
       入数変更前:$price$<br>
       入数変更後:<span id="price">$price$</span> <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       旧価格
      </dt><dd class="data real">
       $oldPrice$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       保険請求分類（医科）
      </dt><dd class="data ">
       $medicineCategory:br$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       保険請求分類（在宅）
      </dt><dd class="data ">
       $homeCategory:br$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       院内倉庫在庫数
      </dt><dd class="data integer">
       $HPstock$ <br>      </dd>
     </dl>
     <dl class="cf">
      <dt class="title">
       特記事項
      </dt><dd class="data ">
       $notice:br$ <br>      </dd>
     </dl>
   </div>
  <input type="hidden" name="detect" value="判定">
  <!-- HIDDEN_PARAM START -->
  $form:hidden$
  <!-- HIDDEN_PARAM END -->
  <input class="submit" type="submit" name="SMPFORM_BACK" value="戻る">  <input class="submit" type="submit" name="submit" value="変更">  
 </form>
<!-- SMP_TEMPLATE_FORM end -->
</div>
     </div>
 </div>
<script>
  $(function(){
    $("form").addClass("uk-form-horizontal uk-margin-large uk-text-center uk-margin-remove");

    $("table").addClass("uk-table");

    $("div.smp_tmpl").addClass("uk-text-left");

    $("input[type='text']").addClass("uk-input uk-width-expand");
    $("select").addClass("uk-select");
    $("input[type='checkbox']").addClass("uk-checkbox");
    $("input[type='checkbox']").addClass("uk-margin-small-right");


    $("input[type='submit']").addClass("uk-button uk-button-primary uk-margin-large-right uk-margin-large-left");
    $("input[type='reset']").addClass("uk-button uk-button-default");
    $("input[name='SMPFORM_BACK']").removeClass("uk-button-primary");
    $("input[name='SMPFORM_BACK']").addClass("uk-button-default");
    $("input").css('text-align','left');
    $("textarea").addClass("uk-textarea");

    $(".title").addClass("uk-form-label uk-margin-remove-top");
    $(".data").addClass("uk-form-controls");

    $(".header").addClass("uk-text-large");
    $(".need").addClass("uk-label uk-label-danger");

    $(".sample").addClass("uk-text-meta uk-text-small");
    $(".suffix").addClass("uk-text-meta uk-text-small uk-width-1-5");
    $(".caution").addClass("uk-text-meta uk-text-small");
    $(".caution").before("<br>");

    $("ul").addClass("uk-list uk-margin-remove");

    $(".error").addClass("uk-form-danger");
    $(".msg").addClass("uk-text-danger");
    $(".header_emesg").addClass("uk-alert-danger uk-alert");


    $("#mainPage").show();
    priceChange('$quantity$','$minPrice$')
  });

  function priceChange(val,minPrice){
    $('#price').text(minPrice * val);
  }
</script>
  </body>
</html>
